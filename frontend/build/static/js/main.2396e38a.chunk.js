(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{175:function(e,a,t){e.exports=t(214)},214:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),r=t(15),i=t.n(r),l=t(7),s=t(18),c=t(283),u=t(271),m=t(265),d=t(142),p=t(132),g=t(141),b=t(272),f=t(81),h=t(280),E=t(268),v=t(149),w=t.n(v),O=t(96),N=t(128),j=t(55),C=t(14),x=t.n(C),y=t(11),P=t.n(y),S=t(273),R=t(263),k=t(266),L=t(267),A=t(101),B=Object(N.a)((function(e){return{paper:{marginTop:e.spacing(5),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},card:{marginTop:e.spacing(5),backgroundColor:A.a}}}));function I(){var e=B(),a=Object(j.a)(),t=a.register,n=a.handleSubmit,r=a.errors;return console.log(r),o.a.createElement(R.a,{maxWidth:"xs"},o.a.createElement(m.a,null),o.a.createElement(k.a,{className:e.card},o.a.createElement(L.a,null,o.a.createElement("div",{className:e.paper},o.a.createElement(O.a,{component:"h1",variant:"h5"},"Registro nuevo"),o.a.createElement("form",{onSubmit:n((function(e,a){""===e.firstName||""===e.lastName||""===e.emailSign||""===e.passwordSign||""===e.confirmPassword?P()({title:"Cuidado !",text:"Debes llenar los espacios vacios",icon:"warning",button:"Continuar"}):e.passwordSign===e.confirmPassword?x.a.post("http://localhost:5000/api/guardarUsuario",{firstName:e.firstName,lasttName:e.lastName,email:e.emailSign,password:e.passwordSign}).then((function(t){var n,o;console.log(t),P()({title:"Dato guardado satisfactoriamente",text:"Registrado en la base de datos",icon:"success",button:"Continuar"}),n=e.emailSign,o=e.firstName,x.a.post("http://localhost:5000/api/emailEnviar",{emailEnviar:n,name:o,asunto:"Resgistro Kendo App",cuerpo:"Bienvenido a nuestra app gracias por registrarte"}).then((function(e){"correcto"===e.data.mensaje&&console.log("Esto esta correcto")})).catch((function(e){e.response?401===e.response.status&&console.log(e.response.data.mensaje):e.request&&P()({title:"Algo fallo",text:"No existe conexion con la base de datos",icon:"error",button:"Continuar"})})),a.target.reset()})).catch((function(e){console.log(e),P()({title:"No se pudo guardar el archivo",text:"Este correo ya se encuentra en la base de datos",icon:"error",button:"Continuar"})})):P()({title:"Datos no guardados",text:"Las contrase\xf1as no coinciden",icon:"error",button:"Continuar"})})),name:"signUp",className:e.form,noValidate:!0},o.a.createElement(E.a,{container:!0,spacing:2},o.a.createElement(E.a,{item:!0,xs:12},o.a.createElement(d.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",inputRef:t,label:"Nombre",autoFocus:!0})),o.a.createElement(E.a,{item:!0,xs:12},o.a.createElement(d.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Apellido",name:"lastName",inputRef:t,autoComplete:"lname"})),o.a.createElement(E.a,{item:!0,xs:12},o.a.createElement(d.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Correo electronico",name:"emailSign",inputRef:t,autoComplete:"email"})),o.a.createElement(E.a,{item:!0,xs:12},o.a.createElement(d.a,{variant:"outlined",required:!0,fullWidth:!0,name:"passwordSign",label:"Contrase\xf1a",inputRef:t,type:"password",id:"password",autoComplete:"current-password"})),o.a.createElement(E.a,{item:!0,xs:12},o.a.createElement(d.a,{variant:"outlined",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirmar contrase\xf1a",inputRef:t,type:"password",id:"confirmPassword",autoComplete:"current-password"}))),o.a.createElement(u.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Registrarse"))))))}function _(){return o.a.createElement(O.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",o.a.createElement(b.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")}var W=Object(N.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},collapse:{marginTop:e.spacing(4),alignItems:"center",align:"center",textAlign:"center"}}}));function D(){var e=W(),a=Object(j.a)(),t=a.register,r=a.handleSubmit,i=a.errors,s=Object(n.useState)(!1),v=Object(l.a)(s,2),N=v[0],C=v[1];return console.log(i),o.a.createElement(E.a,{container:!0,component:"main",className:e.root},o.a.createElement(m.a,null),o.a.createElement(E.a,{item:!0,xs:!1,sm:4,md:7,className:e.image}),o.a.createElement(E.a,{item:!0,xs:12,sm:8,md:5,component:f.a,elevation:6,square:!0},o.a.createElement("div",{className:e.paper},o.a.createElement(c.a,{className:e.avatar},o.a.createElement(w.a,null)),o.a.createElement(O.a,{component:"h1",variant:"h5"},"Ingresar"),o.a.createElement("form",{onSubmit:r((function(e){""===e.email||""===e.password?P()({title:"Cuidado !",text:"Debes llenar los espacios vacios",icon:"warning",button:"Continuar"}):x.a.post("http://localhost:5000/api/validarUsuario",{email:e.email,password:e.password}).then((function(a){"correcto"===a.data.mensaje&&(P()({title:"Estas dentro",text:a.data.mensaje,icon:"success",button:"Continuar"}),localStorage.setItem("TOKEN_APP_TALLER",a.data.token),"remember"===e.recordar&&localStorage.setItem("RECORDAR_APP_TALLER_UBB","remember"),window.location="/home")})).catch((function(e){if(e.response){if(401===e.response.status){var a=e.response.data.mensaje;P()({title:"Algo fallo",text:a,icon:"error",button:"Continuar"})}console.log(e.response.data.mensaje)}else e.request?P()({title:"Algo fallo",text:"No existe conexion con la base de datos",icon:"error",button:"Continuar"}):console.log("hola 2")}))})),name:"SignIn",className:e.form,noValidate:!0},o.a.createElement(d.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Correo electronico",name:"email",inputRef:t,autoComplete:"email",autoFocus:!0}),o.a.createElement(d.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Contrase\xf1a",type:"password",id:"password",inputRef:t,autoComplete:"current-password"}),o.a.createElement(p.a,{control:o.a.createElement(g.a,{value:"remember",color:"primary",name:"recordar",inputRef:t}),label:"Recuerdame"}),o.a.createElement(u.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Ingresar")),o.a.createElement(E.a,{item:!0,className:e.collapse},o.a.createElement(b.a,{href:"#",onClick:function(){console.log(N),C(!N)},className:e.collapse},"\xbfNo tienes una cuenta? \xa1Registrate!"),o.a.createElement(S.a,{in:N},o.a.createElement(I,null))),o.a.createElement(h.a,{mt:5},o.a.createElement(_,null)))))}var T=t(153),q=t(277),F=t(281),M=t(278),U=t(151),G=t.n(U),H=t(133),K=t(13),z=t.n(K),V=t(20),J=t(36),Y=t.n(J),Q=t(275),$=t(140),X=t(145),Z=t(130),ee=t(144),ae=t(274),te=t(54),ne=Object(N.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:220},selectEmpty:{marginTop:e.spacing(2)},card:{marginTop:e.spacing(5),alignItems:"center"},gridGuardarLibro:{alignItems:"center"},datatable:{marginTop:e.spacing(6)},paper:{margin:e.spacing(1,1,3),display:"flex",flexDirection:"column",alignItems:"center"},inputs:{display:"flex",alignItems:"center",marginRight:e.spacing(4),marginTop:e.spacing(5),with:"100%"},espaciado:{margin:e.spacing(2)},inputSelect:{marginTop:e.spacing(.5),marginLeft:e.spacing(4)},cardContent:{width:"100%"},topSpace:{marginTop:e.spacing(4)},main:{align:"center"}}}));function oe(){var e=Object(j.a)(),a=e.register,t=e.handleSubmit,r=e.errors,i=Object(n.useState)([]),s=Object(l.a)(i,2),c=s[0],m=s[1],p=o.a.useState(""),g=Object(l.a)(p,2),b=g[0],f=g[1],h=Object(n.useState)(null),v=Object(l.a)(h,2),w=v[0],N=v[1],C=Object(n.useState)("Guardar libro"),y=Object(l.a)(C,2),S=y[0],R=y[1],A=Object(n.useState)(null),B=Object(l.a)(A,2),I=B[0],_=B[1],W=ne(),D=[{name:"Seleccionar",options:{headerNoWrap:!0,customBodyRender:function(e,a,t){return o.a.createElement(H.a,{variant:"outlined",className:"btnblock",onClick:function(){return T(e)},color:w===e._id?"secondary":""},o.a.createElement("div",{className:W.root},w===e._id?o.a.createElement(ae.a,{className:"fa fa-check-circle"}):o.a.createElement(ae.a,{className:"far fa-circle"})))}}},{name:"Titulo del libro",field:"nombreLibro",options:{filter:!0,sort:!0}},{name:"Codigo",field:"_id",options:{filter:!0,sort:!0}},{name:"Autor",field:"autor",options:{filter:!0,sort:!1}},{name:"idioma",field:"idioma",options:{filter:!0,sort:!1}},{options:{headerNoWrap:!0,customBodyRender:function(e,a,t){return o.a.createElement(H.a,{"aria-label":"delete",onClick:function(){return F(e._id)}},o.a.createElement(ae.a,{className:"far fa-trash-alt"}))}}}],T=function(e){w===e._id?(N(null),document.getElementById("autor").value="",document.getElementById("nombreLibro").value="",f(""),_(null),R("Guardar libro")):(N(e._id),document.getElementById("autor").value=e.autor,document.getElementById("nombreLibro").value=e.nombreLibro,f(e.idioma),_(e._id),R("Modificar libro"))};o.a.useEffect((function(){var e=Object(te.loadCSS)("https://use.fontawesome.com/releases/v5.12.0/css/all.css",document.querySelector("#font-awesome-css"));return function(){e.parentNode.removeChild(e)}}),[]);Object(n.useEffect)((function(){q()}),[]);var q=function(){var e=Object(V.a)(z.a.mark((function e(){var a,t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://localhost:5000/api/libros");case 2:return a=e.sent,t=a.data,m(t),e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(e){x.a.delete("http://localhost:5000/api/librodelete/"+e).then((function(e){console.log(e),P()({title:"Libro eliminado satisfactoriamente",text:"Eliminado de la base de datos",icon:"success",button:"Continuar"}),q()})).catch((function(e){console.log(e),P()({title:"Error",text:"Error: No se pudo borrar",icon:"error",button:"Continuar"}),q()}))};return console.log(r),o.a.createElement(E.a,{className:W.fondo},o.a.createElement(k.a,{className:W.paper},o.a.createElement(L.a,null,o.a.createElement(O.a,{component:"h1",variant:"h4",align:"center"},S,"."),o.a.createElement("form",{onSubmit:t((function(e,a){"Guardar libro"===S?""===e.nombreLibro||""===e.autor||""===b?P()({title:"Datos vacios",text:"Falta completar alguno de los datos",icon:"warning",button:"Continuar"}):x.a.post("http://localhost:5000/api/librosave",{nombreLibro:e.nombreLibro,autor:e.autor,idioma:b}).then((function(e){console.log(e),200===e.status&&(P()({title:"Libro guardado satisfactoriamente",text:"Registrado en la base de datos",icon:"success",button:"Continuar"}),q(),a.target.reset())})).catch((function(e){console.log(e),401===e.response.status?P()({title:"Error al registrar",text:"Este libro ya se encuentra en la base de la datos",icon:"error",button:"Continuar"}):P()({title:"Error al registrar",text:"Hubo un problema con la conexion a la base de datos",icon:"error",button:"Continuar"})})):x.a.put("http://localhost:5000/api/libroUpdate/"+I,{nombreLibro:document.getElementById("nombreLibro").value,autor:document.getElementById("autor").value,idioma:b}).then((function(e){console.log(e),P()({title:"Libro modificado satisfactoriamente",text:"datos guardados",icon:"success",button:"Continuar"}),q()})).catch((function(e){console.log(e),P()({title:"Error",text:"Error: No se pudo modificar",icon:"error",button:"Continuar"}),q()}))})),name:"libros",noValidate:!0},o.a.createElement(E.a,null,o.a.createElement(E.a,{className:W.inputs},o.a.createElement(d.a,{required:!0,fullWidth:!0,className:W.espaciado,name:"nombreLibro",label:"Nombre del libro",inputRef:a,id:"nombreLibro",margin:"normal",InputLabelProps:{shrink:!0}}),o.a.createElement(d.a,{required:!0,id:"autor",className:W.espaciado,fullWidth:!0,label:"autor del libro",name:"autor",inputRef:a,autoComplete:"autor",margin:"normal",InputLabelProps:{shrink:!0}}),o.a.createElement(Z.a,{variant:"outlined",className:W.formControl},o.a.createElement(ee.a,{id:"demo-simple-select-outlined-label"},"Idioma"),o.a.createElement($.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:b,onChange:function(e){f(e.target.value)},label:"idioma"},o.a.createElement(X.a,{value:"ingles"},"Ingles"),o.a.createElement(X.a,{value:"espa\xf1ol"},"Espa\xf1ol")))),o.a.createElement(u.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},S))))),0===c.length?o.a.createElement(Q.a,null):o.a.createElement(Y.a,{fullWidth:!0,className:W.datatable,title:"Libros",data:c,columns:D,options:{selectableRows:!1,print:!1,onlyOneRowCanBeSelected:!1,textLabels:{body:{noMatch:"No se encontraron libros registrados"},pagination:{next:"Siguiente",previous:"P\xe1gina Anterior",rowsPerPage:"Filas por p\xe1gina:",displayRows:"de"},toolbar:{search:"Buscar por titulo o codigo"},selectedRows:{text:"Columna(s) seleccionada",delete:"Eliminar",deleteAria:"Delete Selected Rows",icon:k.a}},download:!1,pagination:!0,rowsPerPage:5,usePaperPlaceholder:!0,rowsPerPageOptions:[5,10,25],sortColumnDirection:"desc",filter:!1,responsive:"stacked"}}))}var re=Object(N.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:220},selectEmpty:{marginTop:e.spacing(2)},card:{marginTop:e.spacing(5),alignItems:"center"},gridGuardarLibro:{alignItems:"center"},datatable:{marginTop:e.spacing(6),alignItems:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},inputs:{display:"flex",alignItems:"center",marginRight:e.spacing(4),with:"100%"},espaciado:{margin:e.spacing(2)},root:{display:"flex"}}}));function ie(){var e=Object(j.a)(),a=e.register,t=e.handleSubmit,r=e.errors,i=Object(n.useState)([]),s=Object(l.a)(i,2),c=s[0],m=s[1],p=Object(n.useState)(null),g=Object(l.a)(p,2),b=g[0],f=g[1],h=Object(n.useState)("Registrar alumno"),v=Object(l.a)(h,2),w=v[0],N=v[1],C=Object(n.useState)(null),y=Object(l.a)(C,2),S=y[0],R=y[1],A=re(),B=[{name:"Seleccionar",options:{headerNoWrap:!0,customBodyRender:function(e,a,t){return o.a.createElement(H.a,{variant:"outlined",className:"btnblock",onClick:function(){return W(e)},color:b===e._id?"secondary":""},o.a.createElement("div",{className:A.root},b===e._id?o.a.createElement(ae.a,{className:"fa fa-check-circle"}):o.a.createElement(ae.a,{className:"far fa-circle"})))}}},{name:"Rut del Alumno",field:"rut",options:{filter:!0,sort:!0}},{name:"Nombre del alumno",field:"nombre",options:{filter:!0,sort:!0}},{options:{headerNoWrap:!0,customBodyRender:function(e,a,t){return o.a.createElement(H.a,{"aria-label":"delete",onClick:function(){return _(e.rut)}},o.a.createElement(ae.a,{className:"far fa-trash-alt"}))}}}];Object(n.useEffect)((function(){I()}),[]),o.a.useEffect((function(){var e=Object(te.loadCSS)("https://use.fontawesome.com/releases/v5.12.0/css/all.css",document.querySelector("#font-awesome-css"));return function(){e.parentNode.removeChild(e)}}),[]);var I=function(){var e=Object(V.a)(z.a.mark((function e(){var a,t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://localhost:5000/api/alumnos");case 2:return a=e.sent,t=a.data,m(t),e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(e){x.a.delete("http://localhost:5000/api/alumnoEliminar/"+e).then((function(e){console.log(e),P()({title:"Eliminado",text:"Alumno eliminado satisfactoriamente",icon:"success",button:"Continuar"}),I()})).catch((function(e){console.log(e),P()({title:"Error",text:"Error: No se pudo borrar",icon:"error",button:"Continuar"}),I()}))},W=function(e){b===e._id?(f(null),document.getElementById("rut").value="",document.getElementById("rut").disabled=!1,document.getElementById("nombre").value="",R(null),N("Registrar alumno")):(f(e._id),document.getElementById("rut").value=e.rut,document.getElementById("rut").disabled=!0,document.getElementById("nombre").value=e.nombre,R(e._id),N("Modificar alumno"))};return console.log(r),o.a.createElement(E.a,null,o.a.createElement(k.a,{className:A.paper},o.a.createElement(L.a,{className:A.nose},o.a.createElement(O.a,{component:"h1",variant:"h4",align:"center"},w,"."),o.a.createElement("form",{onSubmit:t((function(e,a){"Registrar alumno"===w?""===e.nombre||""===e.rut?P()({title:"Datos vacios",text:"Falta completar alguno de los datos",icon:"warning",button:"Continuar"}):x.a.post("http://localhost:5000/api/alumnoSave",{nombre:e.nombre,rut:e.rut}).then((function(e){200===e.status&&(P()({title:"Alumno registrado satisfactoriamente",text:"Registrado en la base de datos",icon:"success",button:"Continuar"}),I(),a.target.reset()),console.log(e)})).catch((function(e){401===e.response.status?P()({title:"Error al registrar",text:"Este alumno ya se encuentra en la base de la datos",icon:"error",button:"Continuar"}):P()({title:"Error al registrar",text:"Hubo un problema con la conexion a la base de datos",icon:"error",button:"Continuar"})})):x.a.put("http://localhost:5000/api/alumnoUpdate/"+S,{nombre:document.getElementById("nombre").value}).then((function(e){console.log(e),P()({title:"Alumno modificado satisfactoriamente",text:"datos guardados",icon:"success",button:"Continuar"}),I()})).catch((function(e){console.log(e),P()({title:"Error",text:"Error: No se pudo modificar",icon:"error",button:"Continuar"}),I()}))})),name:"libros",noValidate:!0},o.a.createElement(E.a,null,o.a.createElement(E.a,{className:A.inputs},o.a.createElement(d.a,{required:!0,fullWidth:!0,className:A.espaciado,name:"rut",label:"Rut del alumno",inputRef:a,id:"rut",autoComplete:"rut por defecto",margin:"normal",InputLabelProps:{shrink:!0}}),o.a.createElement(d.a,{required:!0,id:"nombre",className:A.espaciado,fullWidth:!0,label:"Nombre del alumno",name:"nombre",inputRef:a,autoComplete:"Nombre por defecto",margin:"normal",InputLabelProps:{shrink:!0}})),o.a.createElement(u.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},w))))),o.a.createElement(E.a,{className:A.datatable},0===c.length?o.a.createElement(E.a,{className:A.root},o.a.createElement(Q.a,null)," "):o.a.createElement(Y.a,{title:"Alumnos",data:c,columns:B,options:{selectableRows:!1,print:!1,textLabels:{body:{noMatch:"No se encontro ningun alumno registrado"},pagination:{next:"Siguiente",previous:"P\xe1gina Anterior",rowsPerPage:"Filas por p\xe1gina:",displayRows:"de"},toolbar:{search:"Buscar por Rut o nombre del alumno"},selectedRows:{text:"Columna(s) seleccionada",delete:"Eliminar",deleteAria:"Delete Selected Rows"}},download:!1,pagination:!0,rowsPerPage:5,usePaperPlaceholder:!0,rowsPerPageOptions:[5,10,25],sortColumnDirection:"desc",filter:!1,responsive:"stacked"}})))}var le=t(59),se=t(21),ce=t(287),ue=t(276),me=t(282),de=t(152),pe=t(27),ge=t(279),be=Object(N.a)((function(e){return{appBar:{position:"relative"},datatable:{marginTop:e.spacing(6)},layout:Object(se.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{width:"100%",marginLeft:"auto",marginRight:"auto"}),paper:Object(se.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},inputsDisabled:{marginTop:e.spacing(3)},root:{"& > span":{margin:e.spacing(0)}}}})),fe=["Ingresar Libro","Ingresar Alumno","Ingresar fechas","Orden de prestamo."];function he(){var e=be(),a=o.a.useState(0),t=Object(l.a)(a,2),r=t[0],i=t[1],s=Object(n.useState)([]),c=Object(l.a)(s,2),p=c[0],g=c[1],b=Object(n.useState)([]),h=Object(l.a)(b,2),v=h[0],w=h[1],N=Object(n.useState)([]),j=Object(l.a)(N,2),C=j[0],y=j[1],S=Object(n.useState)(!0),R=Object(l.a)(S,2),L=R[0],A=R[1],B=Object(n.useState)(null),I=Object(l.a)(B,2),_=I[0],W=I[1],D=Object(n.useState)(null),T=Object(l.a)(D,2),q=T[0],F=T[1],M=Object(n.useState)(null),U=Object(l.a)(M,2),G=U[0],K=U[1],J=Object(n.useState)(null),$=Object(l.a)(J,2),X=$[0],Z=$[1],ee=o.a.useState(new Date),ne=Object(l.a)(ee,2),oe=ne[0],re=ne[1],ie=o.a.useState(new Date),se=Object(l.a)(ie,2),he=se[0],Ee=se[1],ve=Object(n.useState)({page:1,per_page:20}),we=Object(l.a)(ve,2),Oe=we[0],Ne=we[1],je=Object(n.useState)({page:1,per_page:20}),Ce=Object(l.a)(je,2),xe=Ce[0],ye=Ce[1],Pe=[{name:"Seleccionar",options:{headerNoWrap:!0,customBodyRender:function(a,t,n){return o.a.createElement(H.a,{variant:"outlined",className:"btnblock",onClick:function(){return Ae(a)},color:_===a._id?"secondary":""},o.a.createElement("div",{className:e.root},_===a._id?o.a.createElement(ae.a,{className:"fa fa-check-circle"}):o.a.createElement(ae.a,{className:"far fa-circle"})))}}},{name:"Titulo del libro",field:"nombreLibro",options:{filter:!0,sort:!0}},{name:"Codigo",field:"_id",options:{filter:!0,sort:!0}},{name:"Autor",field:"autor",options:{filter:!0,sort:!1}},{name:"idioma",field:"idioma",options:{filter:!0,sort:!1}}],Se=[{name:"Seleccionar",options:{headerNoWrap:!0,customBodyRender:function(a,t,n){return o.a.createElement(H.a,{className:"btnblock",onClick:function(){return Be(a)},color:G===a._id?"secondary":""},o.a.createElement("div",{className:e.root},G===a._id?o.a.createElement(ae.a,{className:"fa fa-check-circle"}):o.a.createElement(ae.a,{className:"far fa-circle"})))}}},{name:"Rut del Alumno",field:"rut",options:{filter:!0,sort:!0}},{name:"Nombre del alumno",field:"nombre",options:{filter:!0,sort:!0}}];Object(n.useEffect)((function(){Re(),ke(),Le()}),[]),o.a.useEffect((function(){var e=Object(te.loadCSS)("https://use.fontawesome.com/releases/v5.12.0/css/all.css",document.querySelector("#font-awesome-css"));return function(){e.parentNode.removeChild(e)}}),[]);var Re=function(){var e=Object(V.a)(z.a.mark((function e(){var a,t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://localhost:5000/api/libros");case 2:return a=e.sent,t=a.data,g(t),e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=Object(V.a)(z.a.mark((function e(){var a,t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://localhost:5000/api/alumnos");case 2:return a=e.sent,t=a.data,w(t),e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Le=function(){var e=Object(V.a)(z.a.mark((function e(){var a,t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://localhost:5000/api/prestamos");case 2:return a=e.sent,t=a.data,y(t),e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ae=function(e){_===e._id?(F(null),A(!0),W(null)):(F(e.nombreLibro),A(!1),W(e._id))},Be=function(e){G===e._id?(Z(null),A(!0),K(null)):(Z(e.nombre),A(!1),K(e._id))},Ie=function(e){A(e>he),re(e)},_e=function(e){console.log(e,oe),A(oe>=e),Ee(e)},We=function(e,a,t,n){P()({title:"Registrar pedido",text:"\xbfSeguro que deseas registrar este pedido?",icon:"warning",buttons:!0,dangerMode:!0}).then((function(o){o?x.a.post("http://localhost:5000/api/prestamoSave",{fechaInicio:t,fechaEntrega:n,libro:e,alumno:a}).then((function(e){200===e.status&&(P()({title:"Registrado satisfactoriamente",text:"La prestacion del libro fue hecho satisfactoriamente",icon:"success",button:"Continuar"}),A(!0),W(null),F(null),K(null),Z(null),re(new Date),Ee(new Date),i(0),Le())})).catch((function(e){401===e.response.status?(console.log(e),P()({title:"Error al registrar",text:"Este alumno ya se encuentra en la base de la datos",icon:"error",button:"Continuar"})):P()({title:"Error al registrar",text:"Hubo un problema con la conexion a la base de datos",icon:"error",button:"Continuar"})})):P()("Aun puedes revisar denuevo los datos")}))};return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null),o.a.createElement("main",{className:e.layout},o.a.createElement(f.a,{className:e.paper},o.a.createElement(O.a,{component:"h1",variant:"h4",align:"center"},"Prestamo de libros."),o.a.createElement(ce.a,{activeStep:r,className:e.stepper},fe.map((function(e){return o.a.createElement(ue.a,{key:e},o.a.createElement(me.a,null,e))}))),o.a.createElement(o.a.Fragment,null,r===fe.length?console.log("hola 2 veces"):o.a.createElement(o.a.Fragment,null,function(a){switch(a){case 0:return o.a.createElement(E.a,null," ",0===p.length?o.a.createElement(Q.a,null):o.a.createElement(Y.a,{className:e.datatable,title:"Agregar libros",data:p,columns:Pe,options:{componentWillReceiveProps:!0,print:!1,selectableRows:!1,textLabels:{body:{noMatch:o.a.createElement(Q.a,null)},pagination:{next:"Siguiente",previous:"P\xe1gina Anterior",rowsPerPage:"Filas por p\xe1gina:",displayRows:"de"},toolbar:{search:"Buscar por titulo o codigo"}},download:!1,rowsPerPage:5,usePaperPlaceholder:!0,rowsPerPageOptions:[5,10,25],sortColumnDirection:"desc",filter:!1,responsive:"stacked",page:Oe.page-1,onChangePage:function(e){Ne(Object(le.a)({},Oe,{page:e+1}))},onChangeRowsPerPage:function(e){Ne(Object(le.a)({},Oe,{page:1,per_page:e}))}}}));case 1:return o.a.createElement(E.a,null," ",0===v.length?o.a.createElement(Q.a,null):o.a.createElement(Y.a,{title:"Alumnos",data:v,columns:Se,options:{selectableRows:!1,print:!1,componentWillReceiveProps:!0,textLabels:{body:{noMatch:o.a.createElement(Q.a,null)},pagination:{next:"Siguiente",previous:"P\xe1gina Anterior",rowsPerPage:"Filas por p\xe1gina:",displayRows:"de"},toolbar:{search:"Buscar por Rut o nombre del alumno"},selectedRows:{text:"Columna(s) seleccionada",delete:"Eliminar",deleteAria:"Delete Selected Rows"}},download:!1,pagination:!0,rowsPerPage:5,usePaperPlaceholder:!0,rowsPerPageOptions:[5,10,25],sortColumnDirection:"desc",filter:!1,responsive:"stacked",page:xe.page-1,onChangePage:function(e){ye(Object(le.a)({},xe,{page:e+1}))},onChangeRowsPerPage:function(e){ye(Object(le.a)({},xe,{page:1,per_page:e}))}}}));case 2:return o.a.createElement(pe.a,{utils:de.a},o.a.createElement(E.a,{container:!0,justify:"space-around"},o.a.createElement(ge.a,{margin:"normal",label:"Fecha de inicio del prestamo",format:"MM/dd/yyyy",value:oe,onChange:Ie,KeyboardButtonProps:{"aria-label":"change date"}})),o.a.createElement(E.a,{container:!0,justify:"space-around"},o.a.createElement(ge.a,{margin:"normal",label:"Fecha de entrega del prestamo",format:"MM/dd/yyyy",value:he,onChange:_e,KeyboardButtonProps:{"aria-label":"change date"}})));case 3:return o.a.createElement(E.a,null,o.a.createElement(d.a,{variant:"outlined",className:e.inputsDisabled,required:!0,disabled:"true",fullWidth:!0,label:"Libro a prestacion",value:q}),o.a.createElement(d.a,{variant:"outlined",className:e.inputsDisabled,required:!0,disabled:"true",fullWidth:!0,label:"Alumno involucrado",value:X}),o.a.createElement(d.a,{variant:"outlined",className:e.inputsDisabled,required:!0,disabled:"true",fullWidth:!0,label:"Fecha de inicio",value:oe}),o.a.createElement(d.a,{variant:"outlined",className:e.inputsDisabled,required:!0,disabled:"true",fullWidth:!0,label:"Fecha de entrega",value:he}));default:throw new Error("Paso erroneo")}}(r),o.a.createElement("div",{className:e.buttons},0!==r&&o.a.createElement(u.a,{onClick:function(){A(!(null!==_&&1===r||null!==G&&2===r||3===r)),i(r-1)},className:e.button},"Atras"),o.a.createElement(u.a,{variant:"contained",color:"primary",onClick:function(){A((null===G||0!==r)&&1!==r&&2!==r&&3!==r),3===r&&We(_,G,oe,he),3!==r&&i(r+1)},disabled:L,className:e.button,name:"boton",id:"boton"},r===fe.length-1?"Generar orden de prestamo":"Siguiente"))))),0===C.length?o.a.createElement(Q.a,null):o.a.createElement(Y.a,{className:e.datatable,title:"Historial de prestamos",data:C,columns:[{name:"Rut del Alumno",field:"rut",options:{filter:!1,sort:!0}},{name:"Nombre del alumno",field:"nombre",options:{filter:!1,sort:!0}},{name:"Titulo del libro",field:"nombreLibro",options:{filter:!0,sort:!0}},{name:"Fecha de inicio",field:"fechaInicio",options:{filter:!0,sort:!1}},{name:"Fecha de entrega",field:"fechaEntrega",options:{filter:!0,sort:!1}}],options:{selectableRows:!0,print:!1,onlyOneRowCanBeSelected:!0,textLabels:{body:{noMatch:"No existe ningun prestamos registrado."},pagination:{next:"Siguiente",previous:"P\xe1gina Anterior",rowsPerPage:"Filas por p\xe1gina:",displayRows:"de"},toolbar:{search:"Buscar por titulo o codigo"},selectedRows:{text:"Columna(s) seleccionada",delete:"Eliminar",deleteAria:"Delete Selected Rows",icon:k.a}},download:!1,pagination:!0,rowsPerPage:5,usePaperPlaceholder:!0,rowsPerPageOptions:[5,10,25],sortColumnDirection:"desc",filter:!1,responsive:"stacked",onRowsDelete:function(e){var a=C[e.data[0].dataIndex]._id;console.log(a),x.a.delete("http://localhost:5000/api/eliminarPrestamo/"+a).then((function(e){console.log(e),P()({title:"Libro eliminado satisfactoriamente",text:"Eliminado de la base de datos",icon:"success",button:"Continuar"}),Le()})).catch((function(e){console.log(e),P()({title:"Error",text:"Error: No se pudo borrar",icon:"error",button:"Continuar"}),Le()}))}}})))}var Ee=Object(N.a)((function(e){return{datatable:{marginTop:e.spacing(6)}}}));function ve(){var e=Object(n.useState)([]),a=Object(l.a)(e,2),t=a[0],r=a[1],i=Ee(),s=[{name:"Rut del Alumno",field:"rut",options:{filter:!1,sort:!0}},{name:"Nombre del alumno",field:"nombre",options:{filter:!1,sort:!0}},{name:"Titulo del libro",field:"nombreLibro",options:{filter:!0,sort:!0}},{name:"Fecha de inicio",field:"fechaInicio",options:{filter:!0,sort:!1}},{name:"Fecha de entrega",field:"fechaEntrega",options:{filter:!0,sort:!1}},{name:"Registrar Devolucion",options:{headerNoWrap:!0,customBodyRender:function(e,a,t){return o.a.createElement(u.a,{variant:"contained",onClick:function(){return function(e){P()({title:"Registrar devolucion",text:'Estas apunto de devolver el libro "'+e.nombreLibro+'". \xbfQuieres continuar?',icon:"warning",buttons:!0,dangerMode:!0}).then((function(a){a&&x.a.put("http://localhost:5000/api/updatePrestamo/"+e._id,{fechaEntregaReal:new Date}).then((function(e){200===e.status&&(P()({title:"Registrado satisfactoriamente",text:"El libro fue devuelto a la biblioteca",icon:"success",button:"Continuar"}),c())})).catch((function(e){401===e.response.status?(console.log(e),P()({title:"Error al registrar",text:"No se pudo devolver el libro ya se ha devuelto con anterioridad",icon:"error",button:"Continuar"})):P()({title:"Error al registrar",text:"Hubo un problema con la conexion a la base de datos",icon:"error",button:"Continuar"})}))}))}(e)},color:"primary"},"Devolver libro")}}}];Object(n.useEffect)((function(){c()}),[]);var c=function(){var e=Object(V.a)(z.a.mark((function e(){var a,t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://localhost:5000/api/prestamosDevo");case 2:return a=e.sent,t=a.data,r(t),e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(E.a,null," ",0===t.length?o.a.createElement(Q.a,null):o.a.createElement(Y.a,{className:i.datatable,title:"Prestamos de libros que deben ser devueltos",data:t,columns:s,options:{selectableRows:!1,print:!1,textLabels:{body:{noMatch:"No existen libros que se deban devolver"},pagination:{next:"Siguiente",previous:"P\xe1gina Anterior",rowsPerPage:"Filas por p\xe1gina:",displayRows:"de"},toolbar:{search:"Buscar por titulo o codigo"},selectedRows:{text:"Columna(s) seleccionada",delete:"Eliminar",deleteAria:"Delete Selected Rows",icon:k.a}},download:!1,pagination:!0,rowsPerPage:5,usePaperPlaceholder:!0,rowsPerPageOptions:[5,10,25],sortColumnDirection:"desc",filter:!1,responsive:"stacked"}})," ")}var we=Object(N.a)((function(e){return{appBar:{position:"relative"},datatable:{marginTop:e.spacing(6)},layout:Object(se.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{width:"100%",marginLeft:"auto",marginRight:"auto"}),paper:Object(se.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},inputsDisabled:{marginTop:e.spacing(3)},root:{"& > span":{margin:e.spacing(0)}},topSpace:{marginTop:e.spacing(5)}}}));function Oe(){var e=we(),a=Object(n.useState)([]),t=Object(l.a)(a,2),r=t[0],i=t[1],s=Object(n.useState)(null),c=Object(l.a)(s,2),u=c[0],m=c[1],d=o.a.useState(null),p=Object(l.a)(d,2),g=p[0],b=p[1],f=Object(n.useState)({page:1,per_page:20}),h=Object(l.a)(f,2),v=h[0],w=h[1],N=[{name:"Seleccionar",options:{headerNoWrap:!0,customBodyRender:function(a,t,n){return o.a.createElement(H.a,{variant:"outlined",className:"btnblock",onClick:function(){return C(a)},color:u===a._id?"secondary":""},o.a.createElement("div",{className:e.root},u===a._id?o.a.createElement(ae.a,{className:"fa fa-check-circle"}):o.a.createElement(ae.a,{className:"far fa-circle"})))}}},{name:"Titulo del libro",field:"nombreLibro",options:{filter:!0,sort:!0}},{name:"Codigo",field:"_id",options:{filter:!0,sort:!0}},{name:"Autor",field:"autor",options:{filter:!0,sort:!1}},{name:"idioma",field:"idioma",options:{filter:!0,sort:!1}}];Object(n.useEffect)((function(){j()}),[]),o.a.useEffect((function(){var e=Object(te.loadCSS)("https://use.fontawesome.com/releases/v5.12.0/css/all.css",document.querySelector("#font-awesome-css"));return function(){e.parentNode.removeChild(e)}}),[]);var j=function(){var e=Object(V.a)(z.a.mark((function e(){var a,t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://localhost:5000/api/libros");case 2:return a=e.sent,t=a.data,i(t),e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(e){if(u===e._id)m(null),b(null);else{m(e._id);var a=e._id;x.a.post("http://localhost:5000/api/cantidadPrestamos",{id:a}).then((function(e){200===e.status&&(console.log(e.data.prestamos),b(e.data.prestamos))})).catch((function(e){console.log(e),b(null)}))}};return o.a.createElement(E.a,null,0===r.length?o.a.createElement(Q.a,null):o.a.createElement(Y.a,{className:e.datatable,title:"Agregar libros",data:r,columns:N,options:{componentWillReceiveProps:!0,print:!1,selectableRows:!1,textLabels:{body:{noMatch:o.a.createElement(Q.a,null)},pagination:{next:"Siguiente",previous:"P\xe1gina Anterior",rowsPerPage:"Filas por p\xe1gina:",displayRows:"de"},toolbar:{search:"Buscar por titulo o codigo"}},download:!1,rowsPerPage:5,usePaperPlaceholder:!0,rowsPerPageOptions:[5,10,25],sortColumnDirection:"desc",filter:!1,responsive:"stacked",page:v.page-1,onChangePage:function(e){w(Object(le.a)({},v,{page:e+1}))},onChangeRowsPerPage:function(e){w(Object(le.a)({},v,{page:1,per_page:e}))}}}),null===!g?"":o.a.createElement(k.a,{className:e.paper},o.a.createElement(L.a,{className:e.cardContent},o.a.createElement(O.a,{component:"h1",variant:"h4",align:"center"},"Reporte del libro"),o.a.createElement(O.a,{component:"h4",variant:"h5",className:e.topSpace,align:"left"},"Cantidad de libros prestados = ",null===g?"Selecciona un libro":g))))}function Ne(e){var a=e.children,t=e.value,n=e.index,r=Object(T.a)(e,["children","value","index"]);return o.a.createElement("div",Object.assign({role:"tabpanel",hidden:t!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},r),t===n&&o.a.createElement(h.a,{p:3},o.a.createElement(O.a,null,a)))}function je(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var Ce=Object(N.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper},toolbarButtons:{marginLeft:"auto"}}}));function xe(){var e=Ce(),a=o.a.useState(0),t=Object(l.a)(a,2),n=t[0],r=t[1];return o.a.createElement("div",{className:e.root},o.a.createElement(q.a,{position:"static"},o.a.createElement(F.a,{value:n,onChange:function(e,a){r(a)},"aria-label":"simple tabs example"},o.a.createElement(M.a,Object.assign({label:"Libros"},je(0))),o.a.createElement(M.a,Object.assign({label:"Alumnos"},je(1))),o.a.createElement(M.a,Object.assign({label:"Prestamos"},je(2))),o.a.createElement(M.a,Object.assign({label:"Devoluciones"},je(3))),o.a.createElement(M.a,Object.assign({label:"Reporte"},je(4))),o.a.createElement("div",{className:e.toolbarButtons},o.a.createElement(H.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",onClick:function(){localStorage.removeItem("TOKEN_APP_TALLER"),localStorage.removeItem("RECORDAR_APP_TALLER_UBB"),window.location="/login"}},o.a.createElement(G.a,null),o.a.createElement("p",{style:{fontSize:"12px"}},"Cerrar Sesion"))))),o.a.createElement(Ne,{value:n,index:0},o.a.createElement(oe,null)),o.a.createElement(Ne,{value:n,index:1},o.a.createElement(ie,null)),o.a.createElement(Ne,{value:n,index:2},o.a.createElement(he,null)),o.a.createElement(Ne,{value:n,index:3},o.a.createElement(ve,null)),o.a.createElement(Ne,{value:n,index:4},o.a.createElement(Oe,null)))}var ye=Object(N.a)((function(e){return{root:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}}));function Pe(){var e=ye(),a=Object(n.useState)(!1),t=Object(l.a)(a,2),r=t[0],i=t[1];return Object(n.useEffect)((function(){x.a.post("http://localhost:5000/api/vigencia").then((function(e){200===e.status&&i(!0)})).catch((function(e){e.response?401===e.response.status&&(i(!1),console.log(e.response.data)):e.request}))}),[]),r?o.a.createElement(E.a,{className:e.fondo},o.a.createElement(xe,null)):o.a.createElement("div",{className:e.root},o.a.createElement(Q.a,{alignContent:"center",size:"13rem"}))}var Se=t(112);var Re=function(){var e=Object(n.useState)(!1),a=Object(l.a)(e,2),t=a[0],r=a[1],i=Object(n.useState)(!1),c=Object(l.a)(i,2),u=c[0],m=c[1];return Object(n.useEffect)((function(){x.a.post("http://localhost:5000/api/vigencia").then((function(e){console.log(e.data),200===e.status&&(r(!0),"remember"===localStorage.getItem("RECORDAR_APP_TALLER_UBB")&&m(!0))})).catch((function(e){e.response?401===e.response.status&&(r(!1),console.log(e.response.data)):e.request}))}),[]),o.a.createElement(Se.a,null,u?o.a.createElement(s.a,{to:"/Home"}):"",o.a.createElement(s.d,null,o.a.createElement(s.b,{path:"/Home"},t?o.a.createElement(Pe,null):o.a.createElement(D,null)),o.a.createElement(s.b,{path:"/"},o.a.createElement(D,null))))},ke=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Le(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}x.a.interceptors.request.use((function(e){var a=localStorage.getItem("TOKEN_APP_TALLER");return e.headers.Authorization=null!=a?"Bearer "+a:null,e})),i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(Re,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("","/service-worker.js");ke?(!function(e,a){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Le(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Le(a,e)}))}}()}},[[175,1,2]]]);
//# sourceMappingURL=main.2396e38a.chunk.js.map